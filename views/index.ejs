<%- include('partials/header.ejs'); %>
<!-- Sorting Form -->
<form action="/" method="GET" class="sort-form">
  <label for="sort-by">Sort by:</label>
  <select name="sort" id="sort-by" onchange="this.form.submit()">
    <option value="">-- Select --</option>
    <option value="date_read" <%= sort === 'date_read' ? 'selected' : '' %>>Date Read</option>
    <option value="rating" <%= sort === 'rating' ? 'selected' : '' %>>Rating</option>
    <option value="title" <%= sort === 'title' ? 'selected' : '' %>>Title</option>
  </select>
</form>

<div class="book-list-container">
  <% for(let book of books){ %>
  <form class="book-card" action="/edit" method="POST">
    <input type="hidden" name="book_id" value="<%= book.id %>" />

    <div class="book-card-content">
        
        <div class="book-image">
        <img
          src="<%= book.image %>"
          alt="Cover of <%= book.title %>"
          class="book-cover"
        />
      </div>
      

      <div class="book-info">
        <h2 class="book-title"><%= book.title %></h2>
        <p class="book-author">By: <%= book.author %></p>
        <p class="book-rating">Rating: <%= book.rating %> / 5</p>
        <p class="book-notes"><strong>Notes:</strong> <%= book.notes %></p>
        <p class="book-date">
          Read on: <%= book.date_read ? book.date_read.toDateString() : "Not set" %>
        </p>
      </div>

      <div class="book-actions">
        <button type="submit" class="edit-button">Edit</button>
      </div>
    </div>
  </form>
  <% } %>
</div>

<%- include('partials/footer.ejs'); %>
